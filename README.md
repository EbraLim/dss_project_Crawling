[Crawling Project]  
호텔 당일예약 통합 비교 서비스
=====================
프로젝트 주제
---------- 
## 0. 요약
```
 1) 국내 Top3 호텔예약 플랫폼의 상품들을 한 곳에 집약함으로써 쉽고 빠른 상품 비교 및 예약을 지원하고자 함
 2) 데이터는 10분 간격으로 자동 업데이트되어 DB에 적재되며, 웹을 통해 서비스됨
    (Crontab, MongoDB, Flask 사용)
```
----
## 1. 소개
### 1) 주제
* 국내 Top3 숙박예약 플랫폼에 등록된 서울 내 호텔의 예약가능 객실 데이터 실시간 취합
### 2) 기획의도 및 기대효과
* 플랫폼 간 상품 구성은 서로 상이하며, 동일한 호텔의 같은 객실이라도 가격 차이가 종종 존재함
* 상품 비교를 위해 타 플랫폼을 다녀왔을 때 원하는 객실이 이미 품절되어 있는 등, 소비자가 불편함을 느끼는 지점이 있다고 판단함
* 예약가능 객실 데이터를 한 곳에 모아 비교가능하게 함으로써, 상품검색부터 결제까지의 소요시간을 단축하고, 원하는 방을 예약하지 못하는 문제를 해소함으로써 더 나은 고객경험을 제공하고자 함 
----
## 2. 시스템 구조
![map_image](https://user-images.githubusercontent.com/78459305/111556457-01e91f80-87ce-11eb-88c8-0d3659818a89.png)
----
## 3. 각 단계별 상세설명
### 1) Crontab
* 2~4번의 3개 쉘스크립트를 실행하는 역할을 수행하며, 10분 주기로 실행되도록 세팅되어 있음
### 2) 쉘스크립트 (야놀자)
* 야놀자 사이트에서 호텔별 상세정보를 크롤링하여 데이터를 취합한 후, Mongodb에 데이터를 적재하도록 제작됨
* yanolja.py 모듈은 호텔별 고유ID값을 가져오는 역할을 수행하며, 호텔별 고유ID는 각 호텔의 상세페이지 url 구성 시 필요
* Scrapy framework를 사용하여 크롤링을 진행하며 items.py에 데이터를 적재하고, 적재 완료 후 pipelines.py가 실행되며 MongoDB로 데이터 전송함
### 3) 쉘스크립트 (여기어때)
* 여기어때 사이트에서 호텔별 상세정보를 크롤링하여 데이터를 취합한 후, Mongodb에 데이터를 적재하도록 제작됨
* 별도의 모듈은 제작하지 않음
* Scrapy framework를 사용하여 크롤링을 진행하며 items.py에 데이터를 적재하고, 적재 완료 후 pipelines.py가 실행되며 MongoDB로 데이터 전송함
### 4) 쉘스크립트 (데일리호텔)
* 데일리호텔 사이트에서 호텔별 상세정보를 크롤링한 후, Mongodb에 데이터를 적재하도록 제작됨
* DailyhotelKeys.py 모듈은 호텔별 고유ID값을 가져오는 역할을 수행하며, 호텔별 고유ID는 각 호텔의 상세페이지 url 구성 시 필요
* Scrapy framework를 사용하여 크롤링을 진행하며 items.py에 데이터를 적재하고, 적재 완료 후 pipelines.py가 실행되며 MongoDB로 데이터 전송함
### 5) MongoDB
* 실시간에 가깝게 데이터를 적재한다는 특성상 빠른 업로드가 중요하다고 판단, NoSQL 계열의 MongoDB를 사용함
* Flask를 사용하여 웹 배포 시 최신 데이터 필터링 시 활용하기 위해 'Date' 행은 '년월일-시분초'까지 반영
* 1사이클 당 데이터가 7,000~8,000행 수준으로 들어온다는 점을 고려하여, MongoDB Collection 사이즈는 1시간 정도의 분량인 100,000 행으로 설정함    
  (100,000행이 넘어가면 가장 오래된 데이터부터 순차적으로 삭제됨)
### 6) Flask
* MongoDB에서 최신 1사이클의 데이터셋을 전송받아 웹으로 배포하며, 구분 기준은 'Date' 열을 사용함
* 배포 시, 'Price' 열이 0인 행들은 제외됨
* 원하는 지역이나 호텔의 이름을 입력하고 'search' 버튼을 클릭하면 조건에 맞는 호텔 리스트가 출력되며, 'Link' 열의 링크를 클릭하여 예약페이지로 이동 가능
----
##  4. 예시 화면
(여기에 캡처 이미지 화면 삽입 예정)
----
## 5. 멤버 & 수행업무
* 임현수
  * Scrapy framework를 사용하여 여기어때 & 데일리호텔 크롤링 및 쉘스크립트 작성
  * 리드미 작성 및 프레젠테이션 자료 제작 (메인)

* 최민권
  * Scrapy framework를 사용하여 야놀자 크롤링 및 쉘스크립트 작성
  * Crontab 설정 및 Flask를 활용하여 AWS 웹서버 배포
  * 리드미 작성 및 프레젠테이션 자료 제작 (서브)

----
※ 본 프로젝트는 패스트캠퍼스 데이터사이언스 취업스쿨 16th 크롤링 프로젝트로 진행되었습니다.
